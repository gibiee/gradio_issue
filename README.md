# gradio 관련 이슈 테스트

### Inpaint 기능 구현 시 컴포넌트의 사용 방법이 불편함.
- inpaint 전용 컴포넌트가 없는지?
- gradio 3.x 버전에서 SketchPad 컴포넌트를 유용하게 사용했었는데, gradio 4.x 버전에서는 그러한 컴포넌트가 없는 것 같다.
- 4.x 버전에서 `brush mode` 같은걸 적용해서 비스무리하게 구현할 수는 있는 것 같은데... 구체적으로는 아래와 같은 문제가 있다.
  - brush 칠한 부분이 투명하지 않아서 원본 이미지의 형태를 확인할 수 없음.
  - 검은색을 지울 경우 파악하기 어려움.
  - input과 output 크기가 달라 비교하기 어려움 (UI에서 페인트 버튼이 있는 등 불필요한 요소가 있음.)
  - brush 컬러가 RGB로 적용되어 비직관적임.
- 다음과 같이 구현 예정
  - 업데이트 된 부분이 있을 수 있으므로, 4.x 버전은 최신 버전에서 확인
  - 3.x와 4.x에서의 비교
  - mask 영역에 대해 RGB → BGR 변환을 수행
  - UI 비교 (비디오)
  - 코드 비교


### 데모 및 API 동시요청 시 프로세스가 죽는 현상.
- gradio + FastAPI 에서 데모와 docs에서 동시 요청을 날리면 프로세스가 멈추는 문제가 있음.
- 데모와 API 모두에 적용되는 single queue가 없는 것인지?
- GPU 사용 케이스에서만 발생하는 문제인지 확인 필요.
- 다음과 같이 구현 예정
  - graio 3.x 버전과 4.x 버전 모두 확인 필요 (4.x 버전은 최신 버전에서 확인)
  - CPU 사용 코드는 for문 1억번 돌려서 합계를 구하면 될 것 같고, GPU 사용 코드는 diffusers에서 SD 이미지 생성하면 될 듯.
  - 데모 및 Docs 에서 동시 요청 실행하는 화면 비디오 캡처
